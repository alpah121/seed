<div class="container">
<div class="row message-wrapper rounded shadow mb-20">
    <div class="col-md-4 message-sideleft">
        <div class="panel">
            <div class="panel-heading">
                <div class="pull-left">
                    <h3 class="panel-title">Conversations</h3>
                </div>
                <div class="pull-right">
                        <button type="button" class="btn btn-sm btn-success">New Message</button>
                </div>
                <div class="clearfix"></div>
            </div><!-- /.panel-heading -->
            <div class="panel-body no-padding">
                <div class="list-group no-margin list-message">
                    {{#each messages}}
                    <a data-toggle="collapse" onclick="collapseCurrent('message{{id}}')" href="#message{{id}}" role="button" aria-expanded="false" aria-controls="message{{id}}" class="list-group-item">
                        <h4 class="list-group-item-heading">{{fromUser}} <small>{{createdOn}}</small></h4>
                        <p class="list-group-item-text">
                            <strong>{{title}}</strong>
                        </p>
                        <div class="clearfix"></div>
                    </a>
                    {{/each}}
                </div><!-- /.list-group -->
            </div><!-- /.panel-body -->
        </div><!-- /.panel -->
    </div><!-- /.message-sideleft -->
    <div class="col-md-8 message-sideright">
        {{#each messages}}
        <div class="panel collapse" id="message{{id}}">
            <div class="panel-heading">
                <div class="media">
                    <div class="media-body">
                        <h4 class="media-heading">{{fromUser}}</h4>
                        <small>{{createdOn}}</small>
                    </div>
                </div>
            </div><!-- /.panel-heading -->
            <div class="panel-body">
                <p class="lead">
                    {{body}}
                </p>
                
            </div><!-- /.panel-body -->
        </div><!-- /.panel -->
        {{/each}}
    </div><!-- /.message-sideright -->
</div>

<div class="row">
		<form action="/message/new" method="post">
			
			<label for="to">Enter the name of the recipient</label>
			<input type="text" class="form-control" id="to" name="toUser"/>
			
			<label for="title">Enter the Title</label>
			<input type="text" class="form-control" id="title" name="title"/>
			
			<label for="body">Enter your message</label>
			<input type="text" class="form-control" id="body" name="body"/>
			
			<button type="submit" class="btn btn-primary">Send</button> 
			
		</form>
	</div>

<script>
var current = false;

function collapseCurrent(next)
{
if (!current) 
	{
	current = next;
	}
else
	{
	current.collapse("hide");
	current = next;
	}
}
</script>
